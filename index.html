<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CRM PAP ‚Äì Plug Solu√ß√µes</title>
  <style>
    :root {
      --bg:#ffffff;
      --panel:#ffffff;
      --txt:#0f172a;
      --muted:#6b7280;
      --brand:#001952;
      --accent:var(--brand);
      --stroke:#e5e7eb;
      --stroke-strong:#cbd5e1;
      --shadow:0 6px 18px rgba(2,6,23,.06);
    }
    [data-theme="dark"] {
      --bg:#0f172a;
      --panel:#1e293b;
      --txt:#f1f5f9;
      --muted:#94a3b8;
      --stroke:#334155;
      --stroke-strong:#475569;
      --shadow:0 6px 18px rgba(0,0,0,.6);
    }
    body {margin:0;font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;background:var(--bg);color:var(--txt);}
    .wrap{max-width:980px;margin:24px auto;padding:0 16px}
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:48px;height:48px;border-radius:12px;display:grid;place-items:center;background:var(--brand);overflow:hidden}
    .logo img{width:100%;height:100%;object-fit:cover}
    h1{font-size:22px;margin:0}
    .panel{background:var(--panel);border:1px solid var(--stroke);border-radius:14px;padding:16px;margin:16px 0;box-shadow:var(--shadow)}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
    label{font-size:12px;color:var(--muted)}
    input{width:100%;padding:12px;border-radius:10px;border:1px solid var(--stroke-strong);background:var(--panel);color:var(--txt)}
    input:focus{border-color:var(--brand);outline:none}
    .col-6{grid-column:span 6}
    .col-12{grid-column:span 12}
    .actions{display:flex;gap:10px;flex-wrap:wrap}
    button{border:1px solid var(--stroke-strong);border-radius:12px;padding:10px 14px;cursor:pointer}
    button.primary{background:var(--brand);color:#fff}
    button.warn{background:#fbbf24;color:#1f2937}
    button.danger{background:#ef4444;color:#fff}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{border-bottom:1px solid var(--stroke);padding:8px;text-align:left;font-size:13px}
    .kpi{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0}
    .kpi .card{flex:1 1 160px;background:var(--panel);border:1px solid var(--stroke);border-radius:12px;padding:12px;text-align:center}
    .kpi .card .n{font-weight:700;font-size:18px}
    .footer{font-size:12px;color:var(--muted);margin-top:8px}
  </style>
</head>
<body data-theme="light">
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo"><img src="logo.png" alt="Logo" onerror="this.style.display='none'"></div>
        <h1>CRM PAP ‚Äì Plug Solu√ß√µes</h1>
      </div>
      <button id="toggleTheme">üåô/‚òÄÔ∏è</button>
    </header>

    <section class="panel">
      <div class="grid">
        <div class="col-6">
          <label>Vendedor</label>
          <input id="vendedor" placeholder="Ex.: Carla" />
        </div>
        <div class="col-6">
          <label>Nome do lead</label>
          <input id="lead" placeholder="Ex.: Ana Paula" />
        </div>
        <div class="col-6">
          <label>Telefone</label>
          <input id="telefone" placeholder="(XX) XXXXX-XXXX" />
        </div>
        <div class="col-6">
          <label>Empresa</label>
          <input id="empresa" placeholder="Ex.: Cont√°bil Minas LTDA" />
        </div>
        <div class="col-12 actions">
          <button class="primary" id="addBtn">Adicionar Lead</button>
          <button id="csvBtn">Exportar CSV</button>
          <button class="warn" id="whatsBtn">Copiar WhatsApp</button>
          <button class="danger" id="resetBtn">Zerar dia</button>
        </div>
      </div>
    </section>

    <section class="panel">
      <h3>Leads do dia</h3>
      <div class="kpi" id="kpis"></div>
      <table class="table" id="leadsTable">
        <thead><tr><th>Vendedor</th><th>Lead</th><th>Telefone</th><th>Empresa</th><th></th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <footer class="footer">Plug Solu√ß√µes ‚Ä¢ CRM PAP ‚Ä¢ Claro/Escuro</footer>
  </div>

<script>
(function(){
  const $=(s)=>document.querySelector(s);
  const today=new Date().toISOString().slice(0,10);
  const KEY="crm:"+today;

  const inputs={ven:$('#vendedor'),lead:$('#lead'),tel:$('#telefone'),emp:$('#empresa')};
  const tbody=$('#leadsTable tbody'),kpis=$('#kpis');

  $('#addBtn').onclick=()=>{addLead()};
  $('#resetBtn').onclick=()=>{if(confirm('Zerar dia?')){localStorage.removeItem(KEY);render();}};
  $('#csvBtn').onclick=()=>exportCSV();
  $('#whatsBtn').onclick=()=>copyWhats();
  $('#toggleTheme').onclick=()=>{
    const body=document.body;
    body.dataset.theme=body.dataset.theme==="light"?"dark":"light";
  };

  function getData(){return JSON.parse(localStorage.getItem(KEY)||'{"leads":[]}');}
  function setData(d){localStorage.setItem(KEY,JSON.stringify(d));}
  function addLead(){
    const L={vendedor:inputs.ven.value,lead:inputs.lead.value,tel:inputs.tel.value,emp:inputs.emp.value,id:crypto.randomUUID()};
    if(!L.vendedor||!L.lead){alert('Preencha vendedor e lead');return;}
    const d=getData();d.leads.push(L);setData(d);clear();render();
  }
  function clear(){inputs.ven.value=inputs.lead.value=inputs.tel.value=inputs.emp.value="";}
  function render(){
    const d=getData();tbody.innerHTML="";
    d.leads.forEach(L=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${esc(L.vendedor)}</td><td>${esc(L.lead)}</td><td>${esc(L.tel)}</td><td>${esc(L.emp)}</td>
      <td><a href="#" data-id="${L.id}">remover</a></td>`;
      tr.querySelector('a').onclick=(e)=>{e.preventDefault();del(L.id);};tbody.appendChild(tr);
    });
    renderKPIs(d.leads);
  }
  function del(id){const d=getData();d.leads=d.leads.filter(x=>x.id!==id);setData(d);render();}
  function renderKPIs(leads){
    kpis.innerHTML="";const total=leads.length;
    const byVen={};leads.forEach(l=>byVen[l.vendedor]=(byVen[l.vendedor]||0)+1);
    kpis.appendChild(card(total,"Total leads"));
    Object.keys(byVen).forEach(v=>kpis.appendChild(card(byVen[v],"Leads ‚Äì "+v)));
  }
  function card(n,t){const c=document.createElement('div');c.className='card';c.innerHTML=`<div class="n">${n}</div><div>${t}</div>`;return c;}
  function esc(s){return (s||"").replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;",""":"&quot;","'":"&#39;"}[m]));}
  function exportCSV(){
    const {leads}=getData();if(!leads.length){alert("Nada");return;}
    const rows=[["Vendedor","Lead","Telefone","Empresa"]].concat(leads.map(L=>[L.vendedor,L.lead,L.tel,L.emp]));
    const csv=rows.map(r=>r.map(c=>`"${c}"`).join(";")).join("\n");
    download("leads_"+today+".csv",csv);
  }
  function download(fn,content){const blob=new Blob([content],{type:"text/csv"});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=fn;a.click();}
  function copyWhats(){
    const {leads}=getData();if(!leads.length){alert("Nada");return;}
    const txt=["Relat√≥rio ‚Äì "+today,"Total: "+leads.length,""].concat(leads.map(L=>`- ${L.lead} | ${L.tel} | ${L.emp} | Vend: ${L.vendedor}`)).join("\n");
    navigator.clipboard.writeText(txt).then(()=>alert("Copiado!"));
  }
  render();
})();
</script>
</body>
</html>